<div *ngIf="isDropdown" class="fd-dropdown" [ngClass]="{ 'fd-dropdown--compact': compact, 'fd-dropdown--toolbar': toolbar }">
    <div class="fd-popover">
        <div class="fd-popover__control" #popoverDropdownControlWrapper>
            <button
                fd-button
                class="fd-dropdown__control fd-button"
                [ngClass]="
                    (btnType ? ' fd-button--' + btnType : '') +
                    (glyph ? ' sap-icon--' + glyph : '') +
                    (size ? ' fd-button--' + size : '') +
                    (compact ? ' fd-button--compact' : '') +
                    (this.disabled ? ' is-disabled' : '') +
                    (toolbar ? ' fd-button--standard': '')
                "
                [attr.aria-expanded]="this.disabled ? false : isOpen"
                [attr.aria-disabled]="this.disabled"
                aria-haspopup="true"
            >
                <ng-content></ng-content>
            </button>
        </div>
    </div>
    <ng-container *ngTemplateOutlet="popoverBodyTpl"></ng-container>
</div>
<div *ngIf="!isDropdown" class="fd-popover">
    <div
        #popoverControlWrapper
        class="fd-popover__control"
        [attr.aria-expanded]="this.disabled ? false : isOpen"
        [attr.aria-disabled]="this.disabled"
        [attr.tabindex]="popoverControlIsTabIndexed ? -1 : 0"
        [attr.role]="popoverControlIsTabIndexed ? '' : 'button'"
        (keypress)="onKeypressHandler($event)"
        aria-haspopup="true"
    >
        <ng-content select="fd-popover-control"></ng-content>
    </div>
    <ng-container *ngTemplateOutlet="popoverBodyTpl"></ng-container>
</div>

<ng-template #popoverBodyTpl>
    <div #popoverBodyContent [attr.aria-hidden]="disabled ? true : !isOpen"
         style="background: white;" class="fd-popover__body fd-popover__body--no-arrow" [ngClass]="{'fd-popover__body--no-margin': !arrow || isDropdown}">
        <div *ngIf="arrow && !isDropdown" class="fd-popover__arrow" x-arrow></div>
        <ng-content select="fd-popover-body"></ng-content>
    </div>
</ng-template>
